# 虚拟机设置（VirtualBox）
1. win10（主机） ssh 连接虚拟机CentOS：
    - 虚拟机网络设置：NAT方式，虚拟机可以通过网络访问主机，但是主机不能通过网络访问虚拟机
    - 检查openssh-server的配置是否正确
    - 虚拟机设置端口转发，将虚拟机某端口映射到主机某端口，使得主机可以访问虚拟机提供的服务
    - 注意：设置好端口转发后可能需要一段时间生效，这次是吃过饭回来之后就好了？
    - 相关的CentOS命令
    ```
        nc：网络工具的瑞士军刀
        rpm -qa | grep openssh ：检查有没有安装openssh
    ```

2. VirtualBox虚拟机网络搭建
    - [参考链接](https://www.jianshu.com/p/0537b056790b)
    - [virtualbox manual](https://www.virtualbox.org/manual/ch06.html)
    - NAT模式
    ```
        1. 虚拟机与主机关系：只能单向访问，虚拟机可以通过网络访问主机，主机不能通过网络访问虚拟机
        2. 虚拟机与虚拟机关系：相互不能访问，虚拟机之间各自完全独立
        3. 应用场景：虚拟机只要求能上网
        4. IP样例：
            - ip：10.0.2.15
            - 网关：10.0.2.2    #此处的网关在不同的虚拟机中可能是同一个值，但属于不同的NAT Engine，因此实际上是不同的网关  
            - DNS：10.0.2.3
        5. 注：
            - 通过NAT + 端口映射的方式，可以将虚拟机某端口映射到主机某端口，使得主机可以访问虚拟机提供的服务
    ```
    - Bridged Adapter模式：虚拟机完全可以作为网络中的一台主机
    ```
        1. 
        5. 注：
            - 需要两张物理网卡，一张主机使用，另一张虚拟机使用
    ```
    - Host-only Adapter模式：虚拟机默认情况下不能和网络中的其他主机互相访问
    ```
        1. 虚拟机与主机关系：能和主机相互访问
            - virtualBox在主机中模拟出一张专供虚拟机使用的网卡，因此该网卡不能用来上网，只能用来主机与虚拟机通信
            - 若无虚拟网卡，可以使用virtualBox创建一张虚拟网卡，还可以设置网卡是否启用DHCP服务
        2. 虚拟机之间的关系：使用同一个虚拟网卡的多个虚拟机可以相互访问，因为处于同一个网段（未验证）
        3. 应用场景：在主机无法上网的情况下（可以上网的情况下，桥接和host-only均可以），需要搭建一个模拟局域网，所有机器可以相互访问
        4. 注：
            - 虚拟机设置两张网卡，一张NAT，一张host-only，可使虚拟机既可以与主机通信，又可以与主机共享网络（上网）
    ```
    - Internal模式（内网模式）：虚拟机与外网完全断开，只实现虚拟机于虚拟机之间的内部网络模式

# Centos7 使用

* laptop with Centos7 do not suspend when close lid of laptop
  - vim /etc/systemd/logind.conf
  > ![](Picture/laptop_lid_switch.png) 
